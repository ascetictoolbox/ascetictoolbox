#!/bin/bash -e

  #---------------------------------------------------------------------------------------------------------------------
  # MAIN PROGRAM
  #---------------------------------------------------------------------------------------------------------------------
  #Define script variables
  script_dir=$(dirname $0)

  #---------------------------------------------------------------------------------------------------------------------
  #Prepare vm to lauch tests.
  echo -e "\e[0m"
  echo "*******************************"
  echo "*** Prepare Tests Structure ***"
  echo "*******************************"
  echo -e "\e[0m"
  cd ${script_dir}/../tests/sources/basic
  mvn clean install
  if [ $? -ne 0 ]; then
    exit 1
  fi 

  cd ${script_dir}/../tests/sources/cloud
  mvn clean install
  if [ $? -ne 0 ]; then
    exit 1
  fi

  cd ${script_dir}/../tests/scripts
  ./deploy_sources_cloud
  if [ $? -ne 0 ]; then
    exit 1
  fi

  cd ${script_dir}
  #Process completed
  exit 0

